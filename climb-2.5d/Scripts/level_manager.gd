extends Node2D

# Array to hold all level matrices
var level_matrices = []  # List of matrices for each level
var current_level_in_map = 0  # Current plane (level) in the map
var current_map = 0    # Active level (maps)

var cell_size = Vector2(64, 64)  # Grid cell size

# Array to hold all level matrices
# Level 0
var level_0 = [
		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 11],
			[0, 0, 0, 1, 0],
			[0, 0, 1, 0, 0],
			[0, 1, 0, 0, 0],
			[1, 0, 0, 0, 0]
		],
		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[1, 0, 0, 0, 0]
		],
		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[1, 0, 0, 0, 0]
		],
		[
			[0, 0, 1, 0, 0],
			[0, 0, 0, 1, 0],
			[0, 0, 0, 0, 11],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0]
		],
		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[1, 0, 0, 0, 0]
		],


		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[1, 0, 0, 0, 0]
		],
		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[1, 0, 0, 0, 0]
		],
		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[1, 0, 0, 0, 0]
		],
		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[1, 0, 0, 0, 0]
		],
		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 5, 0],
			[0, 0, 1, 0, 0],
			[0, 1, 0, 0, 0],
			[2, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0]
		],
	]

# Level 1
var level_1 = [
	[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[1, 0, 1, 0, 11]
		],
		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[1, 0, 0, 0, 0]
		],
		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[1, 0, 0, 0, 0]
		],
		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[1, 0, 0, 0, 0]
		],
		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 8, 0, 0, 0],
			[0, 0, 0, 0, 1],
			[0, 1, 0, 0, 0],
			[1, 0, 0, 0, 0],
			[0, 0, 1, 0, 0],
			[0, 0, 0, 0, 11],
			[0, 0, 0, 0, 0],
			[1, 0, 0, 0, 0]
		],


		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[1, 0, 0, 0, 0]
		],
		[
			[1, 0, 0, 0, 0],
			[0, 0, 1, 0, 0],
			[0, 0, 0, 0, 6],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[1, 0, 0, 0, 0]
		],
		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[1, 0, 0, 0, 0]
		],
		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[1, 0, 0, 0, 0]
		],
		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 6],
			[0, 0, 1, 0, 0],
			[2, 0, 0, 0, 0]
		],
	]

# Level 2
var level_2 = [
	[
			[0, 0, 0, 0, 0],
			[7, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 9, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 8, 0, 10, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[1, 0, 0, 0, 11]
		],
		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 11],
			[0, 0, 0, 0, 0],
			[7, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0]
		],
		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[1, 0, 0, 0, 0]
		],
		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[1, 0, 0, 0, 0]
		],
		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 1, 0, 0],
			[1, 0, 0, 0, 0],
			[0, 0, 1, 0, 0],
			[0, 0, 0, 0, 1],
			[0, 0, 1, 0, 0],
			[1, 0, 0, 0, 0],
			[0, 0, 1, 0, 0],
			[0, 0, 0, 0, 11]
		],


		[
			[0, 0, 0, 0, 0],
			[2, 0, 0, 0, 0],
			[0, 0, 0, 1, 0],
			[0, 1, 0, 0, 0],
			[0, 0, 0, 1, 0],
			[0, 1, 0, 0, 0],
			[0, 0, 0, 1, 0],
			[0, 3, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0]
		],
		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 1],
			[0, 1, 0, 0, 0],
			[0, 0, 0, 0, 1],
			[0, 0, 1, 0, 0],
			[2, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0]
		],
		[
			[0, 0, 1, 0, 0],
			[0, 0, 0, 0, 1],
			[0, 0, 1, 0, 0],
			[2, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0]
		],
		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 1, 0, 0],
			[0, 0, 0, 0, 1],
			[0, 0, 1, 0, 0],
			[2, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0]
		],
		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 3, 0, 0, 0],
			[0, 0, 0, 1, 0],
			[0, 0, 1, 0, 0],
			[0, 1, 0, 0, 0],
			[2, 0, 1, 0, 6]
		],
	]

var level_3 = [
	[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[7, 0, 0, 0, 0],
			[0, 0, 1, 0, 0],
			[0, 0, 0, 0, 11],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[1, 8, 9, 10, 11]
		],
		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 10, 0],
			[0, 0, 1, 0, 0],
			[1, 0, 0, 0, 0],
			[1, 0, 0, 10, 0]
		],
		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 11],
			[0, 0, 0, 1, 0],
			[0, 0, 1, 0, 0],
			[0, 8, 0, 0, 0],
			[1, 0, 0, 0, 0]
		],
		[
			[0, 1, 0, 0, 0],
			[0, 0, 0, 1, 0],
			[0, 1, 0, 0, 0],
			[0, 0, 0, 1, 0],
			[0, 1, 0, 0, 0],
			[0, 0, 0, 10, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[1, 0, 0, 0, 0]
		],
		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[7, 0, 0, 0, 11],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[1, 0, 0, 0, 0]
		],


		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[2, 0, 0, 0, 6],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[1, 0, 0, 0, 0]
		],
		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 4, 0, 0],
			[2, 0, 0, 0, 0]
		],
		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[2, 0, 0, 0, 0]
		],
		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 5, 0],
			[0, 3, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[2, 3, 0, 0, 0]
		],
		[
			[0, 0, 0, 0, 0],
			[1, 0, 0, 0, 0],
			[0, 0, 0, 0, 6],
			[0, 0, 0, 0, 0],
			[2, 0, 0, 0, 0],
			[0, 0, 5, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[2, 0, 0, 0, 0]
		],
	]

var level_4 = [
	[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 9, 0, 0],
			[0, 0, 0, 0, 11],
			[0, 0, 0, 0, 0],
			[1, 8, 9, 0, 11]
		],
		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[1, 0, 0, 0, 0]
		],
		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[7, 0, 0, 0, 0],
			[0, 0, 0, 10, 0],
			[1, 0, 0, 0, 0],
			[0, 0, 9, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 9, 0, 0],
			[1, 8, 0, 0, 0]
		],
		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[1, 0, 0, 0, 0]
		],
		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[1, 0, 0, 0, 0]
		],


		[
			[1, 0, 0, 0, 0],
			[1, 0, 0, 0, 0],
			[1, 0, 4, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0]
		],
		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[2, 1, 4, 0, 0]
		],
		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 4, 0, 0],
			[0, 1, 0, 0, 0],
			[2, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 4, 0, 0],
			[2, 0, 0, 0, 0]
		],
		[
			[0, 0, 0, 0, 0],
			[1, 0, 0, 0, 0],
			[1, 0, 0, 1, 0],
			[0, 0, 4, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[1, 0, 0, 0, 0]
		],
		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[2, 0, 0, 0, 0],
			[1, 0, 0, 0, 0],
			[2, 0, 0, 0, 0]
		],
	]

var level_5 = [
	[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 1, 0],
			[0, 0, 1, 0, 0],
			[7, 1, 0, 0, 1],
			[0, 0, 1, 0, 0],
			[7, 1, 0, 0, 11],
			[0, 0, 1, 0, 0],
			[7, 0, 0, 0, 11],
			[1, 1, 0, 0, 0]
		],
		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 10, 0],
			[0, 1, 0, 0, 0],
			[1, 0, 0, 0, 0],
			[1, 0, 0, 0, 11]
		],
		[
			[0, 0, 0, 1, 0],
			[0, 0, 1, 0, 0],
			[1, 0, 0, 0, 0],
			[0, 1, 0, 0, 0],
			[0, 0, 1, 0, 0],
			[0, 0, 0, 0, 1],
			[0, 0, 0, 1, 0],
			[0, 0, 1, 0, 0],
			[0, 1, 0, 0, 0],
			[7, 0, 0, 0, 0]
		],
		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[1, 0, 0, 0, 0]
		],
		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[7, 0, 0, 0, 11],
			[0, 0, 0, 0, 0],
			[7, 0, 0, 0, 11],
			[0, 0, 0, 0, 0],
			[7, 0, 0, 0, 11],
			[0, 0, 9, 0, 0]
		],


		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[2, 0, 0, 0, 6],
			[0, 0, 0, 0, 0],
			[2, 0, 0, 0, 6],
			[0, 0, 0, 0, 0],
			[2, 0, 0, 0, 6],
			[0, 0, 4, 0, 0]
		],
		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[1, 0, 0, 0, 0]
		],
		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 1, 0, 0],
			[1, 0, 0, 0, 0],
			[0, 0, 1, 0, 0],
			[0, 0, 0, 0, 1],
			[0, 0, 1, 0, 0],
			[1, 0, 0, 0, 0],
			[0, 0, 1, 0, 0],
			[1, 0, 0, 0, 6]
		],
		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[1, 1, 0, 1, 1],
			[0, 0, 1, 0, 0],
			[0, 1, 0, 1, 0],
			[0, 0, 1, 0, 0],
			[0, 3, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0]
		],
		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[2, 0, 0, 0, 6],
			[0, 0, 0, 0, 0],
			[2, 0, 0, 0, 6],
			[0, 0, 0, 0, 0],
			[2, 0, 0, 0, 6],
			[0, 3, 0, 0, 0]
		],
	]

var level_6 = [
	[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 8, 0, 0, 0],
			[0, 0, 1, 0, 0],
			[0, 0, 0, 1, 0],
			[0, 0, 0, 0, 1],
			[0, 0, 0, 1, 0],
			[0, 0, 1, 0, 0],
			[0, 1, 0, 0, 0],
			[7, 0, 0, 0, 0]
		],
		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[7, 0, 0, 0, 11],
			[0, 0, 1, 0, 0],
			[0, 0, 0, 1, 0],
			[0, 0, 0, 0, 1],
			[0, 0, 0, 1, 0],
			[0, 0, 1, 0, 0],
			[1, 0, 0, 0, 0],
			[0, 8, 0, 0, 0]
		],
		[
			[0, 1, 0, 0, 0],
			[1, 0, 0, 0, 0],
			[0, 1, 0, 0, 0],
			[1, 0, 0, 0, 0],
			[0, 1, 0, 0, 0],
			[1, 0, 0, 0, 0],
			[0, 1, 0, 0, 0],
			[1, 0, 0, 0, 0],
			[0, 1, 0, 0, 0],
			[1, 0, 0, 10, 0]
		],
		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 9, 0, 0],
			[0, 1, 0, 1, 0],
			[1, 0, 0, 0, 1],
			[0, 1, 0, 1, 0],
			[0, 0, 1, 0, 0],
			[1, 0, 0, 0, 1],
			[0, 0, 9, 0, 0],
			[0, 0, 0, 0, 0]
		],
		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 9, 0, 0],
			[0, 0, 0, 10, 0],
			[0, 0, 0, 0, 1],
			[0, 0, 0, 1, 0],
			[0, 0, 1, 0, 0],
			[0, 1, 0, 1, 0],
			[7, 0, 0, 0, 11]
		],


		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 3, 0, 0, 0],
			[0, 0, 1, 0, 0],
			[0, 0, 0, 1, 0],
			[0, 0, 0, 0, 1],
			[0, 0, 0, 1, 0],
			[0, 0, 1, 0, 0],
			[0, 1, 0, 1, 0],
			[2, 0, 0, 0, 6]
		],
		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[2, 0, 0, 0, 0],
			[0, 0, 1, 0, 0],
			[0, 0, 0, 1, 0],
			[0, 0, 0, 0, 1],
			[0, 0, 0, 1, 0],
			[0, 0, 1, 0, 0],
			[1, 0, 0, 0, 0],
			[0, 3, 0, 0, 0]
		],
		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 5, 0],
			[0, 0, 0, 0, 6],
			[0, 0, 1, 0, 0],
			[0, 1, 0, 0, 0],
			[0, 0, 1, 0, 0],
			[0, 0, 0, 0, 1],
			[0, 0, 0, 5, 0],
			[1, 0, 0, 0, 0]
		],
		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 6],
			[0, 0, 0, 1, 0],
			[0, 0, 1, 0, 0],
			[1, 0, 0, 0, 0],
			[0, 1, 0, 0, 0],
			[0, 0, 4, 0, 0]
		],
		[
			[0, 0, 0, 0, 0],
			[0, 0, 1, 0, 0],
			[0, 3, 0, 1, 0],
			[0, 0, 1, 0, 0],
			[0, 1, 0, 1, 0],
			[1, 0, 0, 0, 1],
			[0, 1, 0, 1, 0],
			[0, 0, 1, 0, 0],
			[0, 1, 0, 1, 0],
			[1, 0, 0, 0, 6]
		],
	]

var level_7 = [
	[
			[1, 0, 0, 0, 1],
			[1, 8, 9, 10, 1],
			[1, 0, 0, 0, 1],
			[1, 0, 0, 0, 1],
			[1, 0, 0, 0, 1],
			[1, 0, 0, 0, 1],
			[1, 0, 9, 0, 1],
			[1, 0, 0, 0, 1],
			[1, 0, 0, 0, 11],
			[1, 0, 0, 0, 1]
		],
		[
			[0, 0, 0, 0, 0],
			[1, 1, 1, 1, 1],
			[7, 0, 0, 0, 0],
			[1, 1, 0, 10, 0],
			[0, 0, 0, 0, 0],
			[0, 1, 1, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 11],
			[0, 0, 1, 0, 0],
			[7, 0, 0, 0, 0]
		],
		[
			[1, 0, 0, 0, 0],
			[0, 1, 0, 0, 0],
			[0, 0, 1, 0, 0],
			[0, 0, 0, 1, 0],
			[0, 0, 0, 0, 1],
			[0, 0, 0, 0, 1],
			[0, 0, 0, 1, 0],
			[0, 0, 1, 0, 0],
			[0, 8, 0, 0, 0],
			[1, 0, 0, 0, 0]
		],
		[
			[0, 0, 0, 0, 0],
			[0, 0, 9, 0, 0],
			[1, 0, 0, 0, 1],
			[1, 0, 0, 0, 1],
			[1, 0, 0, 0, 1],
			[1, 0, 0, 0, 1],
			[1, 0, 0, 0, 1],
			[1, 0, 0, 0, 1],
			[1, 0, 0, 0, 1],
			[1, 8, 1, 1, 1]
		],
		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[7, 0, 0, 0, 0],
			[0, 0, 0, 10, 0],
			[1, 0, 0, 0, 0],
			[0, 0, 0, 10, 0],
			[1, 0, 0, 0, 0],
			[0, 0, 0, 10, 0],
			[1, 0, 0, 0, 0]
		],


		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 3, 0, 0, 0],
			[0, 0, 0, 1, 6],
			[1, 0, 0, 0, 0],
			[0, 1, 0, 0, 0],
			[0, 0, 0, 0, 1],
			[0, 0, 0, 1, 0],
			[0, 0, 1, 0, 0],
			[1, 3, 0, 0, 0]
		],
		[
			[0, 0, 0, 0, 0],
			[2, 0, 0, 1, 0],
			[0, 0, 0, 0, 1],
			[0, 0, 0, 1, 0],
			[0, 0, 1, 0, 0],
			[0, 1, 0, 0, 0],
			[1, 0, 0, 0, 0],
			[0, 1, 0, 0, 0],
			[0, 0, 4, 0, 0],
			[0, 0, 0, 5, 0]
		],
		[
			[0, 0, 0, 0, 0],
			[2, 0, 0, 5, 0],
			[0, 0, 1, 0, 0],
			[0, 0, 0, 0, 1],
			[0, 0, 1, 0, 0],
			[0, 0, 0, 0, 1],
			[2, 0, 1, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0]
		],
		[
			[0, 0, 0, 0, 0],
			[2, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 3, 0, 0, 0],
			[1, 0, 0, 0, 6],
			[0, 1, 0, 0, 0],
			[1, 0, 0, 0, 6],
			[0, 1, 0, 0, 0],
			[1, 0, 0, 0, 6],
			[0, 1, 0, 0, 0]
		],
		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 3, 0, 0, 0],
			[2, 0, 0, 0, 0],
			[0, 0, 0, 0, 0]
		],
	]

var level_8 = [
		[
			[0, 0, 0, 0, 0],
			[7, 0, 0, 0, 11],
			[0, 1, 0, 1, 0],
			[0, 0, 1, 0, 0],
			[0, 1, 0, 1, 0],
			[1, 0, 0, 0, 1],
			[0, 1, 0, 1, 0],
			[0, 0, 1, 0, 0],
			[0, 1, 0, 1, 0],
			[7, 0, 0, 0, 11]
		],
		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 1],
			[0, 0, 0, 10, 0],
			[0, 0, 1, 0, 0],
			[0, 1, 0, 0, 0],
			[1, 0, 0, 0, 11],
			[0, 1, 0, 0, 0],
			[0, 0, 1, 0, 0],
			[0, 0, 0, 1, 0],
			[1, 0, 0, 0, 1]
		],
		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[7, 0, 0, 0, 0],
			[0, 1, 0, 0, 0],
			[0, 0, 0, 0, 11],
			[0, 1, 0, 0, 0],
			[0, 0, 0, 0, 1],
			[0, 1, 0, 0, 0],
			[1, 0, 0, 10, 0]
		],
		[
			[0, 0, 0, 0, 0],
			[0, 1, 0, 0, 0],
			[0, 0, 0, 10, 0],
			[0, 1, 0, 0, 0],
			[0, 0, 0, 1, 0],
			[0, 1, 0, 0, 0],
			[0, 0, 0, 1, 0],
			[0, 1, 0, 0, 0],
			[0, 0, 0, 1, 0],
			[0, 8, 0, 0, 0]
		],
		[
			[0, 0, 0, 0, 0],
			[7, 1, 1, 0, 0],
			[0, 0, 0, 1, 0],
			[0, 0, 0, 0, 1],
			[0, 0, 0, 1, 0],
			[0, 0, 1, 0, 0],
			[0, 1, 0, 0, 0],
			[7, 8, 1, 1, 0],
			[0, 0, 0, 0, 1],
			[0, 8, 1, 1, 0]
		],


		[
			[0, 0, 0, 0, 0],
			[2, 0, 0, 0, 6],
			[0, 1, 0, 1, 0],
			[0, 0, 4, 0, 0],
			[0, 0, 0, 1, 0],
			[0, 0, 0, 0, 1],
			[0, 0, 0, 1, 0],
			[0, 0, 1, 0, 6],
			[0, 1, 0, 0, 0],
			[2, 0, 0, 0, 0]
		],
		[
			[0, 0, 0, 1, 0],
			[0, 0, 1, 0, 0],
			[0, 1, 0, 0, 0],
			[1, 0, 0, 0, 0],
			[0, 1, 0, 0, 0],
			[0, 0, 1, 0, 0],
			[0, 0, 0, 1, 0],
			[0, 0, 0, 0, 6],
			[0, 0, 0, 0, 0],
			[1, 0, 0, 5, 6]
		],
		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[1, 0, 0, 0, 0]
		],
		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 3, 0, 5, 0],
			[1, 0, 0, 0, 1],
			[0, 1, 0, 1, 0],
			[0, 0, 1, 0, 0],
			[0, 1, 0, 1, 0],
			[1, 0, 0, 0, 1],
			[0, 1, 0, 1, 0],
			[0, 0, 4, 0, 0]
		],
		[
			[0, 0, 0, 0, 0],
			[2, 0, 0, 0, 0],
			[0, 1, 0, 0, 0],
			[0, 0, 4, 0, 0],
			[0, 0, 0, 1, 0],
			[0, 3, 0, 0, 1],
			[0, 0, 0, 1, 0],
			[0, 0, 1, 0, 0],
			[0, 1, 0, 0, 0],
			[2, 0, 0, 0, 0]
		],
	]

var level_9 = [
		[
			[1, 1, 1, 1, 1],
			[1, 8, 0, 0, 1],
			[0, 1, 0, 1, 0],
			[7, 8, 9, 10, 11],
			[1, 1, 1, 1, 1],
			[0, 0, 0, 0, 1],
			[7, 8, 0, 1, 11],
			[0, 0, 1, 0, 0],
			[0, 1, 0, 0, 0],
			[7, 8, 9, 10, 11]
		],
		[
			[1, 1, 1, 1, 1],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[7, 0, 0, 0, 0],
			[0, 8, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[7, 8, 9, 10, 11]
		],
		[
			[1, 1, 1, 1, 1],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[7, 8, 9, 10, 11]
		],
		[
			[1, 1, 1, 1, 1],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[7, 8, 9, 10, 11]
		],
		[
			[1, 1, 1, 1, 1],
			[0, 0, 9, 1, 11],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[1, 8, 1, 1, 11],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[7, 8, 9, 10, 11]
		],


		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[2, 0, 0, 0, 1],
			[0, 0, 0, 1, 1],
			[1, 3, 1, 1, 1],
			[2, 3, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[2, 3, 4, 5, 6]
		],
		[
			[0, 0, 0, 0, 0],
			[2, 1, 1, 1, 0],
			[0, 0, 0, 0, 1],
			[2, 1, 1, 1, 0],
			[0, 0, 0, 0, 1],
			[1, 3, 1, 1, 1],
			[2, 3, 1, 1, 6],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[2, 3, 4, 5, 6]
		],
		[
			[1, 1, 1, 1, 1],
			[0, 0, 0, 1, 6],
			[0, 1, 0, 1, 0],
			[2, 1, 1, 1, 0],
			[0, 0, 0, 0, 1],
			[1, 1, 1, 1, 1],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[2, 3, 4, 5, 6]
		],
		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[2, 1, 1, 1, 0],
			[0, 0, 0, 0, 1],
			[1, 1, 1, 1, 1],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[2, 3, 4, 5, 6]
		],
		[
			[0, 0, 0, 1, 0],
			[0, 0, 0, 0, 6],
			[0, 0, 0, 0, 0],
			[2, 1, 1, 1, 0],
			[0, 0, 0, 0, 1],
			[1, 1, 1, 1, 1],
			[2, 1, 1, 1, 6],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[2, 3, 4, 5, 6]
		],
	]

var level_10 = [
	[
			[0, 0, 0, 1, 1],
			[0, 1, 0, 0, 0],
			[7, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[7, 1, 1, 1, 11],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 10, 1],
			[0, 0, 9, 0, 0],
			[1, 1, 0, 0, 0]
		],
		[
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[7, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 1, 0],
			[0, 0, 1, 0, 1],
			[1, 0, 0, 0, 0]
		],
		[
			[0, 1, 0, 0, 0],
			[0, 1, 0, 1, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[1, 0, 0, 1, 0],
			[0, 0, 1, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0]
		],
		[
			[0, 0, 1, 0, 1],
			[0, 0, 0, 0, 0],
			[7, 0, 1, 0, 1],
			[0, 0, 0, 0, 0],
			[0, 0, 1, 0, 0],
			[0, 0, 0, 10, 0],
			[0, 0, 0, 0, 1],
			[0, 0, 0, 0, 0],
			[0, 0, 1, 0, 0],
			[0, 0, 0, 0, 1]
		],
		[
			[1, 0, 0, 0, 0],
			[0, 0, 0, 1, 0],
			[7, 0, 0, 0, 0],
			[0, 0, 1, 0, 0],
			[0, 0, 0, 1, 0],
			[0, 0, 0, 0, 11],
			[0, 0, 0, 0, 0],
			[7, 1, 0, 0, 0],
			[0, 0, 9, 1, 0],
			[0, 0, 0, 0, 11]
		],

		
		[
			[0, 0, 0, 0, 1],
			[0, 0, 0, 0, 0],
			[2, 1, 0, 5, 6],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[2, 0, 0, 0, 0],
			[0, 0, 1, 0, 0],
			[0, 0, 0, 0, 6],
			[0, 0, 0, 0, 0],
			[1, 1, 0, 0, 0]
		],
		[
			[0, 0, 1, 0, 0],
			[1, 0, 1, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[1, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 1],
			[0, 0, 0, 0, 0],
			[1, 0, 0, 0, 0]
		],
		[
			[1, 0, 0, 1, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 1, 0],
			[0, 0, 0, 0, 1],
			[0, 0, 0, 1, 0],
			[1, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 1, 0, 0],
			[2, 1, 0, 1, 6],
			[0, 0, 0, 0, 0]
		],
		[
			[1, 0, 0, 0, 0],
			[0, 0, 1, 0, 1],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 1],
			[1, 0, 0, 5, 0],
			[0, 0, 1, 0, 0],
			[2, 1, 0, 0, 0],
			[0, 0, 0, 0, 1],
			[0, 0, 0, 0, 0]
		],
		[
			[1, 0, 0, 1, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 1, 0],
			[0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0],
			[2, 0, 0, 0, 6],
			[0, 0, 0, 1, 0],
			[1, 0, 0, 0, 0],
			[0, 1, 0, 0, 0],
			[0, 0, 0, 1, 6]
		],
	]


# List of map (level) paths
var maps = [
	level_0,
	level_1,
	level_2,
	level_3,
	level_4,
	level_5,
	level_6,
	level_7,
	level_8,
	level_9,
	level_10
]

func _ready():
	print("Maps:", maps)
	if maps.size() > 0:
		print("First map size:", maps[0].size())
		print("First level size (rows):", maps[0][0].size())
	_initialize_level(current_map, current_level_in_map)  # Start at Map 0, Level 0

func _initialize_level(map_index, level_index):
	print("Initializing Level:")
	print("	Map Index:", map_index)
	print("	Level Index:", level_index)
	print("	Total Maps:", maps.size())
	if map_index < maps.size():
		print("Levels in Selected Map:", maps[map_index].size())
	else:
		print("Invalid Map Index:", map_index)

	if map_index >= 0 and map_index < maps.size():
		var selected_map = maps[map_index]
		if selected_map != null and level_index >= 0 and level_index < selected_map.size():
			clear_platforms()
			current_map = map_index
			current_level_in_map = level_index
			_draw_level(selected_map[level_index])  # Draw the specific level
			_clamp_player_position()
			print("Initialized Map:", current_map, "Level:", current_level_in_map)
		else:
			push_error("Invalid level index for the selected map.")
	else:
		push_error("Invalid map index.")



func _draw_level(matrix):
	print("Drawing level with matrix size:", matrix.size())
	for y in range(matrix.size()):
		for x in range(matrix[y].size()):
			var value = matrix[y][x]
			if value > 0:  # Platform or trigger
				_create_platform(x, y, value)


func clear_platforms():
	for child in get_children():
		child.queue_free()

func _create_platform(x, y, value):
	var platform = StaticBody2D.new()
	var shape = CollisionShape2D.new()
	var rectangle = RectangleShape2D.new()
	rectangle.size = Vector2(cell_size.x, cell_size.y / 4)
	shape.shape = rectangle
	platform.add_child(shape)

	platform.position = Vector2(x * cell_size.x + cell_size.x / 2, y * cell_size.y + cell_size.y / 2)
	add_child(platform)

	var visual = ColorRect.new()
	visual.color = Color(1, 0.8, 0, 1) if value >= 2 else Color(0.3, 0.8, 0.7, 1)
	visual.size = rectangle.size
	visual.position = Vector2(-rectangle.size.x / 2, -rectangle.size.y / 2)
	platform.add_child(visual)

# Clamp player position after initializing level
func _clamp_player_position():
	var player = get_node("/root/World/Player")
	if player:
		var grid_width = maps[current_map][current_level_in_map][0].size() * cell_size.x
		var grid_height = maps[current_map][current_level_in_map].size() * cell_size.y
		player.position.x = clamp(player.position.x, cell_size.x / 2, grid_width - cell_size.x / 2)
		player.position.y = clamp(player.position.y, cell_size.y / 2, grid_height - cell_size.y / 2)
		print("Clamped Player Position:", player.position)

func set_current_map_and_level(map_index, level_index):
	_initialize_level(map_index, level_index)
